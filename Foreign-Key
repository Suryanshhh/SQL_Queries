-- FOREIGN KEYS IN SQL
-- This file shows how tables are connected using foreign keys.
-- This file helps you understand how tables talk to each other in a database.
-- A Foreign Key is used to connect one table with another.

-- Think of it like this:
-- One table is the "parent" (it has the main ID / primary key)
-- The other table is the "child" (it stores that ID as a foreign key)
-- This keeps data clean and meaningful.

-- Why we use Foreign Keys:
-- 1. To avoid wrong or fake data
-- 2. To keep relationships correct
-- 3. To connect related tables properly

CREATE DATABASE company_db;
USE company_db;

-- Parent table
CREATE TABLE departments (
    department_id INT PRIMARY KEY,
    department_name VARCHAR(100) NOT NULL,
    location VARCHAR(100)
);

-- Child table
CREATE TABLE employees (
    employee_id INT PRIMARY KEY,
    first_name VARCHAR(50) NOT NULL,
    last_name VARCHAR(50) NOT NULL,
    email VARCHAR(100),
    hire_date DATE,
    salary DECIMAL(10,2),
    department_id INT,
    FOREIGN KEY (department_id) REFERENCES departments(department_id)
);

-- One-to-One example
CREATE TABLE employee_profile (
    employee_id INT PRIMARY KEY,
    passport_number VARCHAR(20),
    marital_status VARCHAR(20),
    emergency_contact VARCHAR(100),
    FOREIGN KEY (employee_id) REFERENCES employees(employee_id)
);

-- Many-to-Many example

CREATE TABLE students (
    student_id INT PRIMARY KEY,
    first_name VARCHAR(50),
    last_name VARCHAR(50)
);

CREATE TABLE courses (
    course_id INT PRIMARY KEY,
    course_name VARCHAR(100),
    instructor_name VARCHAR(100)
);

CREATE TABLE enrollments (
    enrollment_id INT PRIMARY KEY,
    student_id INT,
    course_id INT,
    grade VARCHAR(5),
    FOREIGN KEY (student_id) REFERENCES students(student_id),
    FOREIGN KEY (course_id) REFERENCES courses(course_id)
);

-- Extra practice table
CREATE TABLE employee_skills (
    skill_id INT PRIMARY KEY,
    employee_id INT,
    skill_name VARCHAR(50),
    skill_level ENUM('Beginner','Intermediate','Advanced','Expert'),
    FOREIGN KEY (employee_id) REFERENCES employees(employee_id)
);
INSERT INTO employee_skills (skill_id, employee_id, skill_name, proficiency_level)
VALUES
    (1, 103, 'Python', 'Expert'),
    (2, 103, 'SQL', 'Advanced'),
    (3, 104, 'Java', 'Intermediate'),
    (4, 107, 'C++', 'Advanced'),
    (5, 107, 'SQL', 'Expert'),
    (6, 102, 'Graphic Design', 'Advanced');
